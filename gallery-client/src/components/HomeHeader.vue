<template>
  <header class="home-header">
    <div 
      class="slider-component"
      v-for="(item, index) in HeaderContent" 
      :key="index" 
      :style="{ backgroundImage: 'url(' + require(`@/assets/${item.background}`) + ')' }"
      ref="sliderComponent">
      <video 
        v-if="item.video"
        class="header-video"
        :src="require(`@/assets/${item.video}`)"
        autoplay 
        muted 
        loop 
        playsinline
        :style="{ pointerEvents: 'none' }"
      ></video>
      <div class="button-aligner">
        <RouterLink class="headerLink" :to="item['boutton']">
          <img v-if="item.buttonImg" :src="require(`@/assets/${item.buttonImg}`)" :alt="item['buttonImgAlt']" />
          <div class="text-xs" v-if="item.buttonTxt">{{ item['buttonTxt'] }}</div>
        </RouterLink>
      </div>
    </div>
  </header>
  <button @click="prevSlide" class="nav-left"><svg width="29" height="47" viewBox="0 0 29 47" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M26 44L5 23.5L26 3" stroke="white" stroke-width="6"/>
</svg>
</button>
  <button @click="nextSlide" class="nav-right"><svg width="29" height="47" viewBox="0 0 29 47" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M3 3L24 23.5L3 44" stroke="white" stroke-width="6"/>
</svg>
</button>
  <div class="discover-invit">
    <svg class="logo-decoration" ref="loggoDeco" width="9338" height="318" viewBox="0 0 9338 318" fill="none" xmlns="http://www.w3.org/2000/svg">
<mask id="mask0_674_173" style="mask-type:alpha" maskUnits="userSpaceOnUse" x="0" y="0" width="9338" height="318">
<rect width="9338" height="318" fill="#F5F5F5"/>
</mask>
<g mask="url(#mask0_674_173)">
<path d="M2768.2 328.969C2756.33 333.61 2742.71 337.38 2727.36 340.281C2712.3 342.891 2696.51 344.196 2680 344.196C2655.96 344.196 2635.25 339.411 2617.87 329.839C2600.79 319.978 2587.46 305.476 2577.9 286.334C2568.63 267.192 2564 243.554 2564 215.42C2564 189.607 2568.78 167.129 2578.34 147.986C2587.9 128.554 2601.94 113.472 2620.48 102.741C2639.31 91.7192 2662.34 86.2085 2689.56 86.2085C2703.75 86.2085 2717.22 87.6587 2729.97 90.559C2743 93.1694 2754.59 96.9399 2764.73 101.87L2747.78 141.025C2738.8 136.385 2729.39 132.904 2719.54 130.584C2709.98 128.264 2699.84 127.104 2689.13 127.104C2673.2 127.104 2659.87 130.874 2649.16 138.415C2638.73 145.956 2630.91 156.397 2625.69 169.739C2620.48 182.791 2617.87 198.018 2617.87 215.42C2617.87 243.554 2623.52 265.306 2634.82 280.678C2646.4 295.76 2663.06 303.301 2684.78 303.301C2690.58 303.301 2696.66 302.866 2703.03 301.996C2709.4 301.126 2714.62 299.966 2718.67 298.515V241.088H2669.58V201.498H2768.2V328.969ZM2805.71 340.716L2890.43 88.8188H2955.17L3039.46 340.716H2982.98L2964.73 278.068H2880.88L2862.63 340.716H2805.71ZM2935.18 176.7C2934.03 172.349 2932.58 167.274 2930.84 161.473C2929.39 155.672 2927.94 149.872 2926.49 144.071C2925.05 137.98 2923.74 132.469 2922.58 127.539C2921.72 132.469 2920.56 137.98 2919.11 144.071C2917.66 149.872 2916.21 155.672 2914.76 161.473C2913.32 167.274 2912.01 172.349 2910.85 176.7L2893.04 237.173H2953L2935.18 176.7ZM3133.34 89.6889V300.256H3231.53V340.716H3080.77V89.6889H3133.34ZM3336.88 89.6889V300.256H3435.07V340.716H3284.31V89.6889H3336.88ZM3487.85 89.6889H3627.75V129.279H3540.42V190.622H3622.1V230.212H3540.42V300.691H3627.75V340.716H3487.85V89.6889ZM3761.01 89.6889C3793.17 89.6889 3817.2 95.9247 3833.13 108.396C3849.35 120.578 3857.46 138.705 3857.46 162.778C3857.46 179.02 3853.55 192.797 3845.73 204.108C3837.91 215.42 3826.61 224.121 3811.84 230.212L3879.19 340.716H3820.97L3767.53 242.828H3739.29V340.716H3686.72V89.6889H3761.01ZM3761.01 204.108C3774.34 204.108 3784.91 201.063 3792.73 194.972C3800.55 188.592 3804.46 178.73 3804.46 165.389C3804.46 152.337 3800.69 142.911 3793.17 137.11C3785.92 131.309 3774.92 128.409 3760.15 128.409H3739.29V204.108H3761.01ZM4105.01 89.6889L4025.5 243.263V340.716H3972.5V245.004L3892.99 89.6889H3949.9L3999 198.888L4048.53 89.6889H4105.01Z" fill="black"/>
<path d="M7114.2 328.969C7102.33 333.61 7088.71 337.38 7073.36 340.281C7058.3 342.891 7042.51 344.196 7026 344.196C7001.96 344.196 6981.25 339.411 6963.87 329.839C6946.79 319.978 6933.46 305.476 6923.9 286.334C6914.63 267.192 6910 243.554 6910 215.42C6910 189.607 6914.78 167.129 6924.34 147.986C6933.9 128.554 6947.94 113.472 6966.48 102.741C6985.31 91.7192 7008.34 86.2085 7035.56 86.2085C7049.75 86.2085 7063.22 87.6587 7075.97 90.559C7089 93.1694 7100.59 96.9399 7110.73 101.87L7093.78 141.025C7084.8 136.385 7075.39 132.904 7065.54 130.584C7055.98 128.264 7045.84 127.104 7035.13 127.104C7019.2 127.104 7005.87 130.874 6995.16 138.415C6984.73 145.956 6976.91 156.397 6971.69 169.739C6966.48 182.791 6963.87 198.018 6963.87 215.42C6963.87 243.554 6969.52 265.306 6980.82 280.678C6992.4 295.76 7009.06 303.301 7030.78 303.301C7036.58 303.301 7042.66 302.866 7049.03 301.996C7055.4 301.126 7060.62 299.966 7064.67 298.515V241.088H7015.58V201.498H7114.2V328.969ZM7151.71 340.716L7236.43 88.8188H7301.17L7385.46 340.716H7328.98L7310.73 278.068H7226.88L7208.63 340.716H7151.71ZM7281.18 176.7C7280.03 172.349 7278.58 167.274 7276.84 161.473C7275.39 155.672 7273.94 149.872 7272.49 144.071C7271.05 137.98 7269.74 132.469 7268.58 127.539C7267.72 132.469 7266.56 137.98 7265.11 144.071C7263.66 149.872 7262.21 155.672 7260.76 161.473C7259.32 167.274 7258.01 172.349 7256.85 176.7L7239.04 237.173H7299L7281.18 176.7ZM7479.34 89.6889V300.256H7577.53V340.716H7426.77V89.6889H7479.34ZM7682.88 89.6889V300.256H7781.07V340.716H7630.31V89.6889H7682.88ZM7833.85 89.6889H7973.75V129.279H7886.42V190.622H7968.1V230.212H7886.42V300.691H7973.75V340.716H7833.85V89.6889ZM8107.01 89.6889C8139.17 89.6889 8163.2 95.9247 8179.13 108.396C8195.35 120.578 8203.46 138.705 8203.46 162.778C8203.46 179.02 8199.55 192.797 8191.73 204.108C8183.91 215.42 8172.61 224.121 8157.84 230.212L8225.19 340.716H8166.97L8113.53 242.828H8085.29V340.716H8032.72V89.6889H8107.01ZM8107.01 204.108C8120.34 204.108 8130.91 201.063 8138.73 194.972C8146.55 188.592 8150.46 178.73 8150.46 165.389C8150.46 152.337 8146.69 142.911 8139.17 137.11C8131.92 131.309 8120.92 128.409 8106.15 128.409H8085.29V204.108H8107.01ZM8451.01 89.6889L8371.5 243.263V340.716H8318.5V245.004L8238.99 89.6889H8295.9L8345 198.888L8394.53 89.6889H8451.01Z" fill="black"/>
<path d="M595.201 328.969C583.326 333.61 569.712 337.38 554.361 340.281C539.299 342.891 523.514 344.196 507.004 344.196C482.963 344.196 462.253 339.411 444.874 329.839C427.785 319.978 414.461 305.476 404.903 286.334C395.634 267.192 391 243.554 391 215.42C391 189.607 395.779 167.129 405.338 147.986C414.896 128.554 428.944 113.472 447.481 102.741C466.308 91.7192 489.335 86.2085 516.562 86.2085C530.755 86.2085 544.223 87.6587 556.968 90.559C570.002 93.1694 581.588 96.9399 591.725 101.87L574.781 141.025C565.802 136.385 556.388 132.904 546.54 130.584C536.982 128.264 526.844 127.104 516.128 127.104C500.197 127.104 486.873 130.874 476.156 138.415C465.729 145.956 457.908 156.397 452.695 169.739C447.481 182.791 444.874 198.018 444.874 215.42C444.874 243.554 450.522 265.306 461.819 280.678C473.405 295.76 490.059 303.301 511.783 303.301C517.576 303.301 523.658 302.866 530.031 301.996C536.403 301.126 541.616 299.966 545.672 298.515V241.088H496.576V201.498H595.201V328.969ZM632.712 340.716L717.434 88.8188H782.17L866.457 340.716H809.976L791.728 278.068H707.875L689.628 340.716H632.712ZM762.184 176.7C761.026 172.349 759.577 167.274 757.839 161.473C756.391 155.672 754.943 149.872 753.495 144.071C752.046 137.98 750.743 132.469 749.585 127.539C748.716 132.469 747.557 137.98 746.109 144.071C744.661 149.872 743.212 155.672 741.764 161.473C740.316 167.274 739.012 172.349 737.854 176.7L720.041 237.173H779.997L762.184 176.7ZM960.34 89.6889V300.256H1058.53V340.716H907.769V89.6889H960.34ZM1163.88 89.6889V300.256H1262.07V340.716H1111.31V89.6889H1163.88ZM1314.85 89.6889H1454.75V129.279H1367.42V190.622H1449.1V230.212H1367.42V300.691H1454.75V340.716H1314.85V89.6889ZM1588.01 89.6889C1620.17 89.6889 1644.2 95.9247 1660.13 108.396C1676.35 120.578 1684.46 138.705 1684.46 162.778C1684.46 179.02 1680.55 192.797 1672.73 204.108C1664.91 215.42 1653.61 224.121 1638.84 230.212L1706.19 340.716H1647.97L1594.53 242.828H1566.29V340.716H1513.72V89.6889H1588.01ZM1588.01 204.108C1601.34 204.108 1611.91 201.063 1619.73 194.972C1627.55 188.592 1631.46 178.73 1631.46 165.389C1631.46 152.337 1627.69 142.911 1620.17 137.11C1612.92 131.309 1601.92 128.409 1587.15 128.409H1566.29V204.108H1588.01ZM1932.01 89.6889L1852.5 243.263V340.716H1799.5V245.004L1719.99 89.6889H1776.9L1826 198.888L1875.53 89.6889H1932.01Z" fill="black"/>
<path d="M4941.2 328.969C4929.33 333.61 4915.71 337.38 4900.36 340.281C4885.3 342.891 4869.51 344.196 4853 344.196C4828.96 344.196 4808.25 339.411 4790.87 329.839C4773.79 319.978 4760.46 305.476 4750.9 286.334C4741.63 267.192 4737 243.554 4737 215.42C4737 189.607 4741.78 167.129 4751.34 147.986C4760.9 128.554 4774.94 113.472 4793.48 102.741C4812.31 91.7192 4835.34 86.2085 4862.56 86.2085C4876.75 86.2085 4890.22 87.6587 4902.97 90.559C4916 93.1694 4927.59 96.9399 4937.73 101.87L4920.78 141.025C4911.8 136.385 4902.39 132.904 4892.54 130.584C4882.98 128.264 4872.84 127.104 4862.13 127.104C4846.2 127.104 4832.87 130.874 4822.16 138.415C4811.73 145.956 4803.91 156.397 4798.69 169.739C4793.48 182.791 4790.87 198.018 4790.87 215.42C4790.87 243.554 4796.52 265.306 4807.82 280.678C4819.4 295.76 4836.06 303.301 4857.78 303.301C4863.58 303.301 4869.66 302.866 4876.03 301.996C4882.4 301.126 4887.62 299.966 4891.67 298.515V241.088H4842.58V201.498H4941.2V328.969ZM4978.71 340.716L5063.43 88.8188H5128.17L5212.46 340.716H5155.98L5137.73 278.068H5053.88L5035.63 340.716H4978.71ZM5108.18 176.7C5107.03 172.349 5105.58 167.274 5103.84 161.473C5102.39 155.672 5100.94 149.872 5099.49 144.071C5098.05 137.98 5096.74 132.469 5095.58 127.539C5094.72 132.469 5093.56 137.98 5092.11 144.071C5090.66 149.872 5089.21 155.672 5087.76 161.473C5086.32 167.274 5085.01 172.349 5083.85 176.7L5066.04 237.173H5126L5108.18 176.7ZM5306.34 89.6889V300.256H5404.53V340.716H5253.77V89.6889H5306.34ZM5509.88 89.6889V300.256H5608.07V340.716H5457.31V89.6889H5509.88ZM5660.85 89.6889H5800.75V129.279H5713.42V190.622H5795.1V230.212H5713.42V300.691H5800.75V340.716H5660.85V89.6889ZM5934.01 89.6889C5966.17 89.6889 5990.2 95.9247 6006.13 108.396C6022.35 120.578 6030.46 138.705 6030.46 162.778C6030.46 179.02 6026.55 192.797 6018.73 204.108C6010.91 215.42 5999.61 224.121 5984.84 230.212L6052.19 340.716H5993.97L5940.53 242.828H5912.29V340.716H5859.72V89.6889H5934.01ZM5934.01 204.108C5947.34 204.108 5957.91 201.063 5965.73 194.972C5973.55 188.592 5977.46 178.73 5977.46 165.389C5977.46 152.337 5973.69 142.911 5966.17 137.11C5958.92 131.309 5947.92 128.409 5933.15 128.409H5912.29V204.108H5934.01ZM6278.01 89.6889L6198.5 243.263V340.716H6145.5V245.004L6065.99 89.6889H6122.9L6172 198.888L6221.53 89.6889H6278.01Z" fill="black"/>
<path d="M4338.67 340.716H4280.01V214.115C4280.01 207.154 4280.01 200.338 4280.01 193.667C4280.3 186.706 4280.59 180.18 4280.88 174.09C4281.46 167.709 4281.9 161.763 4282.19 156.252C4279.29 159.733 4275.81 163.358 4271.76 167.129C4267.7 170.899 4263.36 174.67 4258.73 178.44L4223.1 207.589L4195.29 172.349L4289.57 100.13H4338.67V340.716ZM4426.68 409.89L4533.56 151.467H4393.66V104.916H4596.55V138.415L4487.5 409.89H4426.68Z" fill="black"/>
<path d="M8684.67 340.716H8626.01V214.115C8626.01 207.154 8626.01 200.338 8626.01 193.667C8626.3 186.706 8626.59 180.18 8626.88 174.09C8627.46 167.709 8627.9 161.763 8628.19 156.252C8625.29 159.733 8621.81 163.358 8617.76 167.129C8613.7 170.899 8609.36 174.67 8604.73 178.44L8569.1 207.589L8541.29 172.349L8635.57 100.13H8684.67V340.716ZM8772.68 409.89L8879.56 151.467H8739.66V104.916H8942.55V138.415L8833.5 409.89H8772.68Z" fill="black"/>
<path d="M2165.67 340.716H2107.01V214.115C2107.01 207.154 2107.01 200.338 2107.01 193.667C2107.3 186.706 2107.59 180.18 2107.88 174.09C2108.46 167.709 2108.9 161.763 2109.19 156.252C2106.29 159.733 2102.81 163.358 2098.76 167.129C2094.7 170.899 2090.36 174.67 2085.72 178.44L2050.1 207.589L2022.29 172.349L2116.57 100.13H2165.67V340.716ZM2253.68 409.89L2360.56 151.467H2220.66V104.916H2423.55V138.415L2314.5 409.89H2253.68Z" fill="black"/>
<path d="M6511.67 340.716H6453.01V214.115C6453.01 207.154 6453.01 200.338 6453.01 193.667C6453.3 186.706 6453.59 180.18 6453.88 174.09C6454.46 167.709 6454.9 161.763 6455.19 156.252C6452.29 159.733 6448.81 163.358 6444.76 167.129C6440.7 170.899 6436.36 174.67 6431.73 178.44L6396.1 207.589L6368.29 172.349L6462.57 100.13H6511.67V340.716ZM6599.68 409.89L6706.56 151.467H6566.66V104.916H6769.55V138.415L6660.5 409.89H6599.68Z" fill="black"/>
</g>
</svg>

  </div>
</template>

<script>
import gsap from "gsap";
import ScrollTrigger from "gsap/ScrollTrigger";
import HomeHeaderContent from '../assets/jsonAssets/contents/HomeHeaderContent.json';

gsap.registerPlugin(ScrollTrigger);

export default {
  data() {
    return {
      HeaderContent: HomeHeaderContent, // Charger le JSON directement
      currentIndex: 0, // Suivi de l'index actuel du slider
      autoPlayTimer: null, // Pour gérer l'animation automatique
      isAutoPlaying: true // Contrôle de l'état d'auto-play
    };
  },
  mounted() {
    this.startAutoPlay(); // Lancer l'auto-play quand le composant est monté

    // Animation GSAP avec ScrollTrigger
    gsap.to(this.$refs.loggoDeco, {
      duration: 2,
      x: "-100vw",
      opacity: 1,
      scrollTrigger: {
        trigger: this.$refs.loggoDeco,
        scrub: 4,
        start: "top 90%",
        end: "bottom 10%",
        markers: false,
      }
    });
  },
  beforeUnmount() {
    clearInterval(this.autoPlayTimer); // Nettoyer le timer à la destruction
  },
  methods: {
    nextSlide() {
      this.isAutoPlaying = false; // Stopper l'auto-play si la flèche est utilisée
      clearInterval(this.autoPlayTimer); // Stop le timer

      // Passer au slide suivant
      if (this.currentIndex < this.HeaderContent.length - 1) {
        this.currentIndex++;
      } else {
        this.currentIndex = 0; // Revenir au premier slide
      }
      this.animateSlider();
    },
    prevSlide() {
      this.isAutoPlaying = false; // Stopper l'auto-play si la flèche est utilisée
      clearInterval(this.autoPlayTimer); // Stop le timer

      // Passer au slide précédent
      if (this.currentIndex > 0) {
        this.currentIndex--;
      } else {
        this.currentIndex = this.HeaderContent.length - 1; // Aller au dernier slide
      }
      this.animateSlider();
    },
    animateSlider() {
      gsap.to(this.$refs.sliderComponent, {
        duration: 1, // Durée de l'animation
        x: -this.currentIndex * 100 + "vw", // Déplacer de 100vw par slide
        ease: "power2.inOut"
      });
    },
    startAutoPlay() {
      this.autoPlayTimer = setInterval(() => {
        if (this.isAutoPlaying) {
          // Passer au slide suivant automatiquement
          if (this.currentIndex < this.HeaderContent.length - 1) {
            this.currentIndex++;
          } else {
            this.currentIndex = 0; // Revenir au premier slide quand on est à la fin
          }
          this.animateSlider();
        }
      }, 7000); // Changement automatique toutes les 7 secondes
    }
  }
};
</script>


<style scoped>
.home-header {
  display: flex;
  width: 300vw; /* La largeur de tous les sliders combinés */
  overflow: hidden;
  position: relative;
}

.slider-component {
  position: relative;
  height: 90vh;
  width: 100vw; /* Chaque slide prend la largeur complète de l'écran */
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
}

.nav-left,
.nav-right {
  position: absolute;
  top: 42%;
  cursor: pointer;
  z-index: 2;
}
.nav-left svg,
.nav-right svg{
  height: 1rem;
}

.nav-left {
  left: 10px;
}

.nav-right {
  right: 10px;
}

.headerLink {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: .75rem 3rem;
  min-width: 7rem;
  text-transform: uppercase;
  }
  .discover-invit {
    height: 10rem;
    position: relative;
  }
  .logo-decoration {
    height: 80%;
    position: absolute;
    bottom: 0;
    left: -250vw;
  }
  .button-aligner {
    position: absolute;
    display: flex;
    width: 100%;
    bottom: 3rem;
    justify-content: center;
  }
  .header-video {
    min-height: 100%;
    min-width: 100%;
  }
  
  .headerLink img {
    max-height: 2.25rem;
    max-width: 100%;
  }
</style>
